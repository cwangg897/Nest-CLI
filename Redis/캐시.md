### 패키지 설치

```ts
$ pnpm add cache-manager
$ pnpm add -D @types/cache-manager

$ pnpm add cache-manager-ioredis --save
$ pnpm add -D @types/cache-manager-ioredis

https://overcome-the-limits.tistory.com/692
그만 알아보자 deprecated됬다
```
![image](https://github.com/cwangg897/Nest-Record/assets/79621675/c4f469c3-b779-4339-bfe2-8b6e975a26d8)



### 첫번쨰 서버자체적 인메모리를 이용하자
그래서 역시 공식문서이다
 @nestjs/cache-manage
이렇게 사용하는겨 import 매우 잘봐야함
import { CACHE_MANAGER } from '@nestjs/cache-manager';
import { Cache } from 'cache-manager';

```ts
  async findAllProduct(page: PageRequest) {
    const cacheData = await this.cacheManager.get(`product:${page.pageNo}`);
    if (cacheData) {
      console.log('캐시작동');
      return cacheData;
    }
    const total = await this.productRepository.count();
    const products = await this.productRepository.findAll(
      page.getLimit(),
      page.getOffset(),
    );
    const result = new Page(total, page.pageSize, products);
    await this.cacheManager.set(`product:${page.pageNo}`, result, 3000);
    const cache = await this.cacheManager.get(`product:${page.pageNo}`);
    console.log(cache);
    return result;
  }
```






### scale out과 서버를 다시킬상황에 대비하여 Redis를 활용










출처: <https://overcome-the-limits.tistory.com/692 [Plus Ultra:티스토리]>
